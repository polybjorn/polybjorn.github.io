---
import Layout from '../../layouts/Layout.astro';
import { t } from '../../data/translations.js';
import { projects } from '../../data/gallery.js';
import { ArrowRight, Mail, Phone, MessageCircle, Rss } from 'lucide-astro';

const lang = 'no';
const tr = t[lang];
const location = "Røvær, Haugesund";

const latestImages = projects
  .flatMap(p => p.images)
  .slice(-3)
  .reverse();
---

<Layout lang={lang}>
  <title slot="head">Bjørn A. Andersen</title>

  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      background: #1e2228;
      color: #dde1e7;
      font-family: 'Piazzolla', serif;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
    }

    .hero {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 20vh;
      text-align: center;
      padding: 3rem 2rem 1rem;
    }

    .hero img.avatar {
      width: 200px;
      height: 200px;
      border-radius: 50%;
      object-fit: cover;
      margin-bottom: 1.5rem;
    }

    h1 {
      font-family: 'Piazzolla', serif;
      font-size: 2.8rem;
      color: #fff;
      margin-bottom: 0.4rem;
    }

    .icons {
      display: flex;
      gap: 1.2rem;
      margin-top: 0.8rem;
      margin-bottom: 1rem;
    }

    .icon-link {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.15rem;
      cursor: pointer;
    }

    .icon-link span {
      font-size: 0.55rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #666;
      transition: color 0.2s;
    }

    .icon-link:hover span { color: #fff; }
    .icon-link a img { transition: opacity 0.2s; }
    .icon-link a:hover img { opacity: 0.8; }

    .icon-img {
      width: 48px;
      height: 48px;
      object-fit: contain;
      vertical-align: middle;
    }

    .content {
      max-width: 680px;
      width: 100%;
      padding: 1rem 2rem 2rem;
    }

    .bio {
      max-width: 480px;
      margin: 0 auto;
    }

    .bio p {
      font-size: 1.1rem;
      line-height: 1.8;
      color: #ccc;
      margin-bottom: 1.5rem;
      text-align: center;
    }

    .bio p:first-child { margin-top: 0; }
    .bio a { color: #6aaeee; text-decoration: none; }
    .bio a:hover { text-decoration: underline; }

    .preview {
      margin: 3rem 0;
      text-align: center;
    }

    .preview-grid {
      display: flex;
      flex-direction: row;
      gap: 1rem;
      justify-content: center;
      flex-wrap: nowrap;
    }

    .preview-grid img {
      width: 120px;
      height: 120px;
      object-fit: cover;
      border-radius: 12px;
      background: #2a2e35;
    }

    .preview-item { position: relative; }

    .badge {
      position: absolute;
      top: 8px;
      left: 8px;
      background: rgba(255, 255, 255, 0.12);
      color: #aaa;
      font-size: 0.65rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      padding: 3px 7px;
      border-radius: 4px;
      z-index: 1;
    }

    .more-arrow {
      display: flex;
      align-items: center;
      justify-content: center;
      color: #888;
      text-decoration: none;
      padding: 0 0.5rem;
      transition: color 0.2s;
      align-self: center;
    }

    .more-arrow:hover { color: #dde1e7; }

    .contact {
      padding: 1.5rem 0 2rem;
      margin-top: 1rem;
      border-top: 1px solid #2a2e35;
      width: 100%;
    }

    .contact h2 {
      font-family: 'Piazzolla', serif;
      font-size: 1.3rem;
      font-weight: normal;
      margin-bottom: 0.8rem;
      color: #ccc;
      text-align: center;
    }

    .contact ul {
      list-style: none;
      display: flex;
      flex-direction: row;
      justify-content: center;
      gap: 0.4rem 2rem;
      flex-wrap: wrap;
      color: #aaa;
      font-size: 1.1rem;
    }

    .contact li {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
    }

    .contact li a {
      display: inline-flex;
      align-items: center;
      gap: 0.4rem;
      color: #6aaeee;
      text-decoration: none;
    }

    .contact li a:hover { text-decoration: underline; }

    .signal-item {
      flex-basis: 100%;
      justify-content: center;
    }
    .row-break {
      flex-basis: 100%;
      height: 0;
    }

    @media (max-width: 480px) {
      body { height: auto; overflow: auto; }
      h1 { font-size: 1.8rem; }
      .hero { min-height: auto; padding: 2rem 1rem 0.5rem; }
      .hero img.avatar { width: 140px; height: 140px; }
      .content { padding: 0 1.5rem 2rem; }
      .bio p { font-size: 1rem; line-height: 1.7; }
      .bio p:first-child { margin-top: 0; }
      .icon-img { width: 32px; height: 32px; }
      .icons { gap: 1.5rem; }
      .icon-link span { color: #fff; }
      .contact ul { gap: 0.4rem 1rem; font-size: 0.9rem; }
      .preview-grid img { width: 90px; height: 90px; }
    }
  </style>

  <section class="hero">
    <img
      class="avatar"
      src="https://res.cloudinary.com/det9ftymo/image/upload/c_pad,b_gen_fill,w_360,h_360/v1725405810/photo_jn86fv.jpg"
      alt="Bjørn A. Andersen"
    />
    <h1>Bjørn A. Andersen</h1>
    <div class="icons">
      <div class="icon-link">
        <a href="/no/cv">
          <img src="https://res.cloudinary.com/djpkffk5u/image/upload/v1772282318/resume_mjdcft.svg" class="icon-img" alt="CV" />
        </a>
        <span>{tr.cv}</span>
      </div>
      <div class="icon-link">
        <a href="https://grabcad.com/bjorn.a.andersen-1">
          <img src="https://res.cloudinary.com/djpkffk5u/image/upload/v1772282528/3D_printer_dbzhhj.svg?v=2" class="icon-img" alt="GrabCAD" />
        </a>
        <span>{tr.models}</span>
      </div>
      <div class="icon-link">
        <a href="/gallery">
          <img src="https://res.cloudinary.com/djpkffk5u/image/upload/v1772283848/photo-gallery_pe3tke.svg" class="icon-img" alt="Galleri" />
        </a>
        <span>{tr.gallery}</span>
      </div>
    </div>
  </section>

  <div class="content">
    <div class="bio">
      <p>{tr.bio1}</p>
      <p>Jeg deler redigerbare design under en fri og <a href="https://creativecommons.org/licenses/by-sa/4.0/">åpen lisens</a> når det er mulig.</p>
      <p>For tiden på <a href="https://www.openstreetmap.org/#map=14/59.43849/5.09195" target="_blank" rel="noopener">{location}</a>.</p>
    </div>

    <div class="preview">
      <div class="preview-grid">
        {latestImages.map((img, i) => (
          <div class="preview-item">
            {i === 0 && <span class="badge">Siste</span>}
            <img src={img.url} alt={img.alt} loading="lazy" />
          </div>
        ))}
        <a href="/gallery" class="more-arrow" title="Se alle modeller">
          <ArrowRight size={36} strokeWidth={1.5} />
        </a>
      </div>
    </div>

    <div class="contact">
      <h2>{tr.contact}</h2>
      <ul>
        <li><Phone size={18} strokeWidth={1.5} style="color: #4CAF82;" /> <span id="phone"></span></li>
        <li><Mail size={18} strokeWidth={1.5} style="color: #E8A838;" /> <span id="email"></span></li>
        <li class="row-break"></li>
        <li>
          <MessageCircle size={18} strokeWidth={1.5} style="color: #6aaeee;" />
          <a href="https://signal.me/#eu/polybjorn.99">{tr.signal}</a>
        </li>
        <li>
          <Rss size={18} strokeWidth={1.5} style="color: #6364FF;" />
          <a href="https://social.polybjorn.com/@bjanda" rel="me">{tr.mastodon}</a>
        </li>
      </ul>
    </div>
  </div>

  <script>
    const phone = atob('KzQ3IDk2OSAxMSA1ODc=');
    const email = atob('YmphbmRhQHBtLm1l');
    document.getElementById('phone').textContent = phone;
    document.getElementById('email').textContent = email;
  </script>
</Layout>
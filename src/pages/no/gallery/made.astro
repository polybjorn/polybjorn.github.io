---
import Layout from '../../../layouts/Layout.astro';
import { projects, cloudinaryUrl } from '../../../data/gallery.js';

const lang = 'no';
const allImages = projects.flatMap(p =>
  p.images.map(img => ({ ...img, project: p.title }))
);
---

<Layout lang={lang} title="Gallery – Bjørn A. Andersen" description="Gallery of 3D models, prints, and renders by Bjørn A. Andersen.">
  

  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      background: #1e2228;
      color: #eee;
      font-family: 'Piazzolla', serif;
    }

    .wrap {
      max-width: 1600px;
      width: 100%;
      margin: 0 auto;
      padding: 2rem 1.5rem 4rem;
    }

    .back {
      display: inline-block;
      margin-bottom: 2rem;
      color: #888;
      text-decoration: none;
      font-size: 0.85rem;
      letter-spacing: 0.05em;
      transition: color 0.2s;
    }
    .back:hover { color: #fff; }

    .grid {
      columns: 4;
      gap: 1rem;
    }

    .grid-item {
      position: relative;
      margin-bottom: 1rem;
      break-inside: avoid;
      border-radius: 6px;
      overflow: hidden;
    }

    .grid-item img {
      width: 100%;
      height: auto;
      display: block;
    }

    .grid-item.opaque img { background: #1e2228; }

.overlay {
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0;
  padding: 0.75rem;
  display: flex;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.2s;
  background: none;
}

    .grid-item:hover .overlay { opacity: 1; }

.overlay-title {
  font-size: 0.75rem;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: #fff;
  background: rgba(0,0,0,0.5);
  padding: 3px 10px;
  border-radius: 4px;
}

    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      overflow: hidden;
      clip: rect(0,0,0,0);
      white-space: nowrap;
      border: 0;
    }
    @media (max-width: 700px) {
      .grid { columns: 2; }
      .overlay { opacity: 1; background: none; }
      .overlay-title { display: none; }
    }

    @media (max-width: 400px) {
      .grid { columns: 1; }
    }
  </style>

  <main>
  <div class="wrap">
    <div style="display:flex;justify-content:center;gap:3rem;margin-bottom:2rem;">
      <a class="back" href="/no">← Tilbake</a>
      <a class="back" href="/no/gallery/found">Funnet →</a>
    </div>
    <h1 class="sr-only">Laget</h1>
    <div class="grid">
      {allImages.map(img => (
<div class={`grid-item ${img.transparent ? 'transparent' : 'opaque'}`}>
  {img.link
    ? <a href={img.link} target="_blank" rel="noopener" aria-label={img.title}><img src={cloudinaryUrl(img.url, { width: 600 })} alt="" loading="lazy" /></a>
    : <img src={cloudinaryUrl(img.url, { width: 600 })} alt={img.alt} loading="lazy" />
  }
  <div class="overlay">
    <span class="overlay-title">{img.title}</span>
  </div>
</div>
      ))}
    </div>
  </div>
  <div style="display:flex;justify-content:center;gap:3rem;padding:2rem 0 3rem;">
    <a class="back" href="/no">← Tilbake</a>
    <a class="back" href="#" onclick="window.scrollTo({top:0,behavior:'smooth'});return false;">↑ Topp</a>
    <a class="back" href="/no/gallery/found">Funnet →</a>
  </div>
  </main>
</Layout>